{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "StrykerMetaSchema",
  "description": "Options for Stryker for JS and TypeScript and all officially supported plugins.",
  "type": "object",
  "properties": {
    "allowConsoleColors": {
      "description": "The 'allowConsoleColors' value indicates whether Stryker should use colors in console.",
      "type": "boolean",
      "default": true
    },
    "coverageAnalysis": {
      "description": "Indicates which coverage analysis strategy to use. During mutation testing, stryker will try to only run the tests that cover a particular line of code.\n\n'perTest': Analyse coverage per test.\n'all': Analyse the coverage for the entire test suite.\n'off' (default): Don't use coverage analysis",
      "type": "string",
      "enum": [
        "off",
        "all",
        "perTest"
      ],
      "default": "off"
    },
    "dashboard": {
      "description": "The options for the dashboard reporter",
      "$ref": "#/definitions/dashboardOptions",
      "default": {}
    },
    "fileLogLevel": {
      "description": "Set the log level that Stryker uses to write to the \"stryker.log\" file",
      "$ref": "#/definitions/logLevel",
      "default": "off"
    },
    "files": {
      "description": "With `files` you can choose which files should be included in your test runner sandbox.\nThis is normally not needed as it defaults to all files not ignored by git.\nTry it out yourself with this command: `git ls-files --others --exclude-standard --cached --exclude .stryker-tmp`.\n\nIf you do need to override `files` (for example: when your project does not live in a git repository),\nyou can override the files here.\n\nWhen using the command line, the list can only contain a comma separated list of globbing expressions.\nWhen using the config file you can provide an array with `string`s",
      "type": "array",
      "items": {
        "type": "string"
      }
    },
    "logLevel": {
      "description": "Set the log level that Stryker uses to write to the console.",
      "$ref": "#/definitions/logLevel",
      "default": "info"
    },
    "maxConcurrentTestRunners": {
      "description": "Specifies the maximum number of concurrent test runners to spawn. Mutation testing is time consuming. By default, Stryker tries to make the most of your CPU's, by spawning as many test runners as you have CPU cores (`Number.MAX_SAFE_INTEGER`).",
      "type": "number",
      "default": 9007199254740991
    },
    "mutate": {
      "description": "With mutate you configure the subset of files to use for mutation testing. Generally speaking, these should be your own source files.",
      "type": "array",
      "items": {
        "type": "string"
      },
      "default": [
        "{src,lib}/**/*.js?(x)",
        "!{src,lib}/**/__tests__/**/*.js?(x)",
        "!{src,lib}/**/?(*.)+(spec|test).js?(x)",
        "!{src,lib}/**/*+(Spec|Test).js?(x)"
      ]
    },
    "mutator": {
      "description": "With mutator you configure which mutator plugin you want to use, and optionally, which mutation types to exclude from the test run.",
      "oneOf": [
        {
          "type": "string"
        },
        {
          "$ref": "#/definitions/mutatorDescriptor"
        }
      ],
      "default": "javascript",
      "errorMessage": "should be an \"object\" describing the mutator or a \"string\". See https://github.com/stryker-mutator/stryker/tree/master/packages/core#mutator."
    },
    "plugins": {
      "description": "With 'plugins', you can add additional Node modules for Stryker to load (or require). By default, all node_modules starting with @stryker-mutator/* will be loaded, so you would normally not need to specify this option. These modules should be installed right next to stryker. For a current list of plugins, you can consult 'npm' or 'stryker-mutator.io.'",
      "type": "array",
      "items": {
        "type": "string"
      },
      "default": [
        "@stryker-mutator/*"
      ]
    },
    "reporters": {
      "description": "With reporters, you can set the reporters for stryker to use.",
      "type": "array",
      "items": {
        "type": "string"
      },
      "default": [
        "clear-text",
        "progress",
        "html"
      ]
    },
    "htmlReporter": {
      "description": "The options for the html reporter",
      "$ref": "#/definitions/htmlReporterOptions"
    },
    "symlinkNodeModules": {
      "description": "The 'symlinkNodeModules' value indicates whether Stryker should create a symbolic link to your current node_modules directory in the sandbox directories. This makes running your tests by Stryker behave more like your would run the tests yourself in your project directory. Only disable this setting if you really know what you are doing.",
      "type": "boolean",
      "default": true
    },
    "tempDirName": {
      "description": "Choose a different temp dir that Stryker uses for mutation testing. This directory will contain copies of your source code during a mutation test run. It will be created if it not exists and is *entirely deleted* after a successful run, so change this with caution.",
      "type": "string",
      "default": ".stryker-tmp"
    },
    "testFramework": {
      "description": "Configure which test framework you are using. This option is not mandatory, as Stryker is test framework agnostic (it doesn't care what framework you use), However, it is required when coverageAnalysis is set to 'perTest', because Stryker needs to hook into the test framework in order to measure code coverage results per test and filter tests to run.",
      "type": "string"
    },
    "testRunner": {
      "description": "With 'testRunner' you specify the test runner that Stryker uses to run your tests. The default value is command. The command runner runs a configurable bash/cmd command and bases the result on the exit code of that program (0 for success, otherwise failed). You can configure this command via the config file using the 'commandRunner: { command: 'npm run mocha' }'. It uses 'npm test' as the command by default.",
      "type": "string",
      "default": "command"
    },
    "thresholds": {
      "description": "Specify the thresholds for mutation score.",
      "$ref": "#/definitions/mutationScoreThresholds",
      "default": {}
    },
    "timeoutFactor": {
      "description": "Configure the allowed timeout deviation relative to the time of a normal test run. Tweak this if you notice that mutants are prone to creating slower code, but not infinite loops (for that, use `timeoutMS`)",
      "type": "number",
      "default": 1.5
    },
    "timeoutMS": {
      "description": "Configure an absolute timeout deviation. Tweak this if you run Stryker on a busy machine and you need to wait longer to make sure that the code indeed entered an infinite loop.",
      "type": "number",
      "default": 5000
    },
    "transpilers": {
      "description": "Configure which transpiler plugins should transpile the code before it's executed. This is an array where the transpilers are called in the other of the array. This defaults to an empty array meaning no transpilation will be done.",
      "type": "array",
      "items": {
        "type": "string"
      },
      "default": []
    },
    "babel": {
      "description": "Configuration for @stryker-mutator/babel-transpiler",
      "title": "StrykerBabelConfig",
      "default": {},
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "extensions": {
          "description": "Load additional extensions here. By default only these extensions get picked up by babel: `\".js\", \".jsx\", \".es6\", \".es\", \".mjs\"`.\nFor example: if you want to enable typescript transpilation, set extensions to `[\"ts\", \"tsx\"]`.",
          "type": "array",
          "default": [],
          "items": {
            "type": "string"
          }
        },
        "optionsFile": {
          "description": "The location of your babelrc file. Set this value to `null` to disable loading of a babel config file.",
          "default": ".babelrc",
          "type": [
            "string",
            "null"
          ]
        },
        "options": {
          "description": "Override babel options from your config file here. Please see [babel's documentation](https://babeljs.io/docs/en/options) to see what is available.\n\nSome options are restricted to be set, because the @stryker-mutator/babel-transpiler takes control of it. These options are: `filename`, `filenameRelative` and `cwd`.",
          "$ref": "http://json.schemastore.org/babelrc",
          "type": "object"
        }
      }
    },
    "jasmineConfigFile": {
      "description": "Specify your [jasmine configuration file](https://jasmine.github.io/setup/nodejs.html#configuration) to be loaded. Leaving this blank will result in the jasmine defaults, which are undocumented (see [source code here](https://github.com/jasmine/jasmine-npm/blob/master/lib/jasmine.js#L10-L38)).",
      "type": "string"
    },
    "jest": {
      "title": "JestOptions",
      "description": "Configuration for @stryker-mutator/jest-runner",
      "type": "object",
      "default": {},
      "properties": {
        "projectType": {
          "$ref": "#/definitions/jestProjectType",
          "default": "custom"
        },
        "config": {
          "description": "A custom Jest configuration object. You could also use `require` to load it here. Please leave it empty if you want jest configuration to be loaded from package.json or a standard jest configuration file.",
          "type": "object",
          "default": {}
        },
        "enableFindRelatedTests": {
          "description": "Whether to run jest with the `--findRelatedTests` flag. When `true`, Jest will only run tests related to the mutated file per test. (See [_--findRelatedTests_](https://jestjs.io/docs/en/cli.html#findrelatedtests-spaceseparatedlistofsourcefiles)",
          "type": "boolean",
          "default": true
        }
      },
      "additionalProperties": false
    },
    "karma": {
      "description": "Configuration for @stryker-mutator/karma-runner",
      "title": "StrykerKarmaSetup",
      "additionalProperties": false,
      "type": "object",
      "default": {},
      "properties": {
        "projectType": {
          "$ref": "#/definitions/karmaProjectKind",
          "default": "custom"
        },
        "configFile": {
          "description": "Specify a ['karma.conf.js' file](http://karma-runner.github.io/2.0/config/configuration-file.html) to be loaded. Options specified directly in your stryker.conf.js file using `karma.config` will overrule options in your karma.conf.js file.",
          "type": "string"
        },
        "config": {
          "description": "Specify [karma configuration options](http://karma-runner.github.io/2.0/config/configuration-file.html) directly. Options specified here will overrule any options in your karma.conf.js file.",
          "type": "object"
        },
        "ngConfig": {
          "$ref": "#/definitions/karmaNgConfigOptions"
        }
      }
    },
    "mochaOptions": {
      "title": "MochaOptions",
      "additionalProperties": false,
      "type": "object",
      "description": "Configuration for @stryker-mutator/mocha-runner",
      "default": {},
      "properties": {
        "require": {
          "description": "Set mocha's [`require` option](https://mochajs.org/#-r---require-module-name)",
          "type": "array",
          "items": {
            "type": "string"
          },
          "default": []
        },
        "ignore": {
          "description": "Set mocha's [`ignore option](https://github.com/mochajs/mocha/blob/master/example/config/.mocharc.yml#L26)",
          "type": "array",
          "items": {
            "type": "string"
          },
          "default": []
        },
        "file": {
          "description": "Set mocha's [`file options`](https://mochajs.org/#-file-filedirectoryglob)",
          "type": "array",
          "items": {
            "type": "string"
          },
          "default": []
        },
        "opts": {
          "description": "Specify a ['mocha.opts' file](https://mochajs.org/#mochaopts) to be loaded. Options specified directly in your stryker.conf.js file will overrule options from the 'mocha.opts' file. Disable loading of an additional mocha.opts file with `false`. The only supported mocha options are used: `--ui`, `--require`, `--async-only`, `--timeout`, `--grep` (or their short form counterparts). Others are ignored by the @stryker-mutator/mocha-runner.",
          "type": "string",
          "default": "./test/mocha.opts"
        },
        "config": {
          "description": "Explicit path to the [mocha config file](https://mochajs.org/#-config-path)",
          "type": "string"
        },
        "package": {
          "description": "Specify an explicit path to a package.json file (ostensibly containing configuration in a mocha property). See https://mochajs.org/#-package-path.",
          "type": "string"
        },
        "no-package": {
          "type": "boolean",
          "default": "false",
          "description": "Explicit turn off [mocha package file](https://mochajs.org/#-package-path)"
        },
        "no-opts": {
          "type": "boolean",
          "default": "false",
          "description": "Explicit turn off [mocha opts file](https://mochajs.org/#-opts-path)"
        },
        "no-config": {
          "type": "boolean",
          "default": "false",
          "description": "Explicit turn off [mocha config file](https://mochajs.org/#-config-path)"
        },
        "timeout": {
          "description": "Set mocha's [`timeout` option](https://mochajs.org/#-t---timeout-ms)",
          "type": "number",
          "default": 2000
        },
        "async-only": {
          "description": "Set mocha's [`async-only` option](https://mochajs.org/#-async-only-a)",
          "type": "boolean",
          "default": false
        },
        "ui": {
          "description": "Set the name of your [mocha ui](https://mochajs.org/#-u---ui-name)",
          "type": "string",
          "default": "bdd"
        },
        "files": {
          "description": "DEPRECATED, use `spec` instead.",
          "oneOf": [
            {
              "type": "string"
            },
            {
              "type": "array",
              "items": {
                "type": "string"
              }
            }
          ]
        },
        "spec": {
          "description": "Choose which files to include. This is comparable to [mocha's test directory](https://mochajs.org/#the-test-directory) although there is no support for `--recursive`.\n\nIf you want to load all files recursively: use a globbing expression (`'test/**/*.js'`). If you want to decide on the order of files, use multiple globbing expressions. For example: use `['test/helpers/**/*.js', 'test/unit/**/*.js']` if you want to make sure your helpers are loaded before your unit tests.",
          "type": "array",
          "items": {
            "type": "string"
          },
          "default": [
            "test/**/*.js"
          ]
        },
        "grep": {
          "description": "Specify a mocha [`grep`](https://mochajs.org/#grep) command, to single out individual tests.",
          "type": "string"
        },
        "extension": {
          "description": "Specify mocha [--extension](https://mochajs.org/#-extension-ext) property.",
          "type": "array",
          "items": {
            "type": "string"
          }
        }
      }
    },
    "tsconfigFile": {
      "description": "Location of your tsconfig.json file",
      "type": "string"
    },
    "tsconfig": {
      "description": "Override tsconfig from your tsconfig.json file",
      "type": "object",
      "$ref": "http://json.schemastore.org/tsconfig#/definitions/compilerOptionsDefinition/properties/compilerOptions"
    },
    "wct": {
      "description": "Configuration for the @stryker-mutator/wct-runner. For more information about the available wct options, please see [wct's config.ts file](https://github.com/Polymer/tools/blob/master/packages/web-component-tester/runner/config.ts#L36).",
      "type": "object",
      "properties": {
        "configFile": {
          "description": "Location of the 'wct.conf.json' file.",
          "type": "string"
        },
        "verbose": {
          "description": "Enable/disable verbose WCT logging. WCT can be noisy. By default, Stryker will swallow any wct log messages. Enabling this option will forward any wct log messages to Stryker logging. Don't forget to set `logLevel` (or `fileLogLevel`) to `'debug'` in your Stryker configuration to get the most logging out of WCT.",
          "type": "boolean",
          "default": false
        },
        "npm": {
          "description": "Use WCT with the `--npm` flag. This will allow web-components installed via npm, instead of bower.",
          "type": "boolean",
          "default": false
        }
      }
    },
    "webpack": {
      "title": "WebpackOptions",
      "description": "Configuration for @stryker-mutator/webpack-transpiler",
      "type": "object",
      "additionalProperties": false,
      "default": {},
      "properties": {
        "configFile": {
          "description": "Location of your webpack config file",
          "type": "string",
          "default": "webpack.config.js"
        },
        "silent": {
          "description": "Specify to remove the \"ProgressPlugin\" from your webpack config file (making the process silent)",
          "type": "boolean",
          "default": true
        }
      }
    }
  },
  "definitions": {
    "logLevel": {
      "title": "LogLevel",
      "type": "string",
      "enum": [
        "off",
        "fatal",
        "error",
        "warn",
        "info",
        "debug",
        "trace"
      ],
      "tsEnumNames": [
        "Off",
        "Fatal",
        "Error",
        "Warning",
        "Information",
        "Debug",
        "Trace"
      ]
    },
    "reportType": {
      "title": "ReportType",
      "type": "string",
      "enum": [
        "full",
        "mutationScore"
      ],
      "tsEnumNames": [
        "Full",
        "MutationScore"
      ]
    },
    "dashboardOptions": {
      "title": "DashboardOptions",
      "additionalProperties": false,
      "type": "object",
      "properties": {
        "project": {
          "description": "Indicates which project to use if the \"dashboard\" reporter is enabled.",
          "type": "string"
        },
        "version": {
          "description": "Indicates which version to use if the \"dashboard\" reporter is enabled.",
          "type": "string"
        },
        "module": {
          "description": "Indicates which module to use if the \"dashboard\" reporter is enabled.",
          "type": "string"
        },
        "baseUrl": {
          "description": "Indicates the base url of the stryker dashboard.",
          "type": "string",
          "default": "https://dashboard.stryker-mutator.io/api/reports"
        },
        "reportType": {
          "description": "Indicates wether to send a full report (inc. source code and mutant results) or only the mutation score.",
          "$ref": "#/definitions/reportType",
          "default": "full"
        }
      }
    },
    "htmlReporterOptions": {
      "title": "HtmlReporterOptions",
      "additionalProperties": false,
      "type": "object",
      "properties": {
        "baseDir": {
          "description": "The output folder for the html report.",
          "type": "string",
          "default": "reports/mutation/html"
        }
      }
    },
    "mutationScoreThresholds": {
      "title": "MutationScoreThresholds",
      "additionalProperties": false,
      "type": "object",
      "properties": {
        "high": {
          "$ref": "#/definitions/percentage",
          "default": 80
        },
        "low": {
          "$ref": "#/definitions/percentage",
          "default": 60
        },
        "break": {
          "oneOf": [
            {
              "type": "null"
            },
            {
              "$ref": "#/definitions/percentage"
            }
          ],
          "default": null
        }
      }
    },
    "percentage": {
      "type": "number",
      "minimum": 0,
      "maximum": 100
    },
    "mutatorDescriptor": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "name": {
          "type": "string",
          "default": "javascript"
        },
        "plugins": {
          "anyOf": [
            {
              "type": "array",
              "items": {
                "type": [
                  "string",
                  "array"
                ]
              }
            },
            {
              "type": "null"
            }
          ],
          "default": null
        },
        "excludedMutations": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "default": []
        }
      },
      "required": [
        "name"
      ]
    },
    "jestProjectType": {
      "description": "The type of project you are working on. \n* `custom` uses the `config` option. \n*`create-react-app` when you are using [create-react-app](https://github.com/facebook/create-react-app)\n* `create-react-app-ts` when you are using [create-react-app-typescript](https://github.com/wmonk/create-react-app-typescript)\n* `react`: DEPRECATED, please use `create-react-app`.",
      "enum": [
        "create-react-app",
        "create-react-app-ts",
        "react",
        "react-ts",
        "custom"
      ]
    },
    "karmaProjectKind": {
      "title": "ProjectKind",
      "description": "Specify which kind of project you're using. This determines which command is used to start karma\n* `custom`: configure @stryker-mutator/karma-runner to use `karma start`\n* `angular-cli`: configure @stryker-mutator/karma-runner to use `ng test`",
      "enum": [
        "custom",
        "angular-cli"
      ]
    },
    "karmaNgConfigOptions": {
      "title": "NgConfigOptions",
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "testArguments": {
          "description": "Add [ng test arguments](https://github.com/angular/angular-cli/wiki/test#options). For example, specify an alternative project with: `\"testArguments\": { \"project\": \"my-lib\" }",
          "title": "NgTestArguments",
          "type": "object",
          "additionalProperties": {
            "type": "string"
          }
        }
      }
    }
  }
}